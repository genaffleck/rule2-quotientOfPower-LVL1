<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quotient of Powers Rule • Practice</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
      :root {
        --accent: #2563eb;
        font-size: clamp(14px, 2vw, 18px);
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html,
      body {
        height: 100%;
        width: 100%;
        overflow: hidden; /* ✅ prevent dragging/scrollbars */
      }
      body {
        background: #f6f7fb;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
        display: flex;
        flex-direction: column;
      }

      header {
        flex: 0 0 auto;
        width: 100%;
        background: var(--accent);
        color: white;
        padding: 8px 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }
      .header-title {
        font-size: 1.1rem;
        font-weight: bold;
      }
      .stopwatch-container {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }
      .stopwatch {
        background: rgba(255, 255, 255, 0.15);
        padding: 4px 10px;
        border-radius: 8px;
        font-size: 0.85rem;
        white-space: nowrap;
      }
      .timer-btn {
        padding: 5px 8px;
        border: none;
        border-radius: 6px;
        background: white;
        color: var(--accent);
        font-size: 0.8rem;
        cursor: pointer;
      }

      main {
        flex: 1 1 auto;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 8px;
      }

      .card {
        width: 100%;
        max-width: 600px;
        background: #fff;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        text-align: center;

        display: flex; /* ✅ center content inside */
        flex-direction: column;
        justify-content: center; /* vertical centering */
        align-items: center;
        transition: height 0.3s ease; /* smooth expand/shrink */
      }

      h2 {
        font-size: 2rem;
        margin-bottom: 1rem;
      }
      #question {
        font-size: 2.25rem;
        margin: 2rem 0;
        word-break: break-word;
      }
      .solution {
        display: none;
        margin-top: 10px;
        font-size: 1.5rem;
        color: #222;
        text-align: center;
      }
      .btns {
        display: flex;
        gap: 8px;
        justify-content: center;
        margin-top: 10px;
        width: 100%;
      }
      .btns button {
        flex: 1 1 50%; /* each takes 50% of .card */
        max-width: 50%;
      }

      button {
        padding: 8px 12px;
        border: none;
        border-radius: 8px;
        background: var(--accent);
        color: #fff;
        font-size: 1.2rem;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(37, 99, 235, 0.35);
        flex: 1 1 45%;
        max-width: 200px;
      }
      button.secondary {
        background: #e5e7eb;
        color: #111;
        box-shadow: none;
      }
      .steps {
        line-height: 1.4;
        display: inline-block;
        text-align: left;
      }

      footer {
        flex: 0 0 auto;
        width: 100%;
        background: #e5e7eb;
        padding: 6px;
        text-align: center;
        color: #333;
        font-size: 0.75rem;
      }

      /* Tablets */
      @media (max-width: 768px) {
        .btns {
          flex-direction: column;
        }
        .btns button {
          flex: 1 1 100%;
          max-width: 100%;
        }
      }
      /* Smaller devices */
      @media (max-width: 480px) {
        .card {
          border-radius: 12px;
          padding: 12px;
        }
        #question {
          font-size: 2rem;
        }
        button {
          font-size: 0.8rem;
          padding: 6px 8px;
        }
      }
    </style>
  </head>
  <body>
    <!-- HEADER -->
    <header>
      <div class="header-title">Quotient of Powers Rule</div>
      <div class="stopwatch-container">
        <div class="stopwatch" id="stopwatch">00:00</div>
        <button class="timer-btn" id="startStopBtn" onclick="toggleStopwatch()">
          Start
        </button>
        <button class="timer-btn" onclick="resetStopwatch()">Reset</button>
      </div>
    </header>

    <!-- MAIN -->
    <main>
      <div class="card">
        <h2>Divide:</h2>
        <div id="question" class="question"></div>
        <div class="btns">
          <button id="toggleBtn" onclick="toggleSolution()">
            Show Solution
          </button>
          <button class="secondary" onclick="generateQuestion()">
            New Question
          </button>
        </div>
        <div id="solution" class="solution">
          <div class="steps" id="steps"></div>
        </div>
      </div>
    </main>

    <!-- FOOTER -->
    <footer>© 2025 • Genesis Ruiz - Math Teacher, Sauyo High School</footer>
    <script>
      // Stopwatch
      let stopwatchInterval;
      let seconds = 0;
      let running = false;
      function updateDisplay() {
        let mins = String(Math.floor(seconds / 60)).padStart(2, "0");
        let secs = String(seconds % 60).padStart(2, "0");
        document.getElementById("stopwatch").textContent = `${mins}:${secs}`;
      }
      function toggleStopwatch() {
        const btn = document.getElementById("startStopBtn");
        if (!running) {
          stopwatchInterval = setInterval(() => {
            seconds++;
            updateDisplay();
          }, 1000);
          running = true;
          btn.textContent = "Stop";
        } else {
          clearInterval(stopwatchInterval);
          running = false;
          btn.textContent = "Start";
        }
      }
      function resetStopwatch() {
        clearInterval(stopwatchInterval);
        running = false;
        seconds = 0;
        updateDisplay();
        document.getElementById("startStopBtn").textContent = "Start";
      }

      // Helpers
      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
      function randomVariable() {
        const letters = "abcdefghijklmnopqrstuvwxyz";
        return letters[Math.floor(Math.random() * letters.length)];
      }
      function formatVarPow(variable, k) {
        if (k === 0) return "1";
        if (k === 1) return `${variable}`;
        return `${variable}^{${k}}`;
      }
      function gcd(a, b) {
        return b === 0 ? a : gcd(b, a % b);
      }
      function simplifyFraction(a, b) {
        const g = gcd(a, b);
        return [a / g, b / g];
      }

      // Generate quotient question
      function generateQuestion() {
        const v = randomVariable();
        let m = getRandomInt(1, 6);
        let n = getRandomInt(1, 6);
        if (n > m) [m, n] = [n, m]; // ensure m ≥ n
        const useCoeffs = Math.random() < 0.5;

        let qTex = "";
        let steps = [];

        if (!useCoeffs) {
          const diff = m - n;
          qTex = `\\(\\dfrac{${formatVarPow(v, m)}}{${formatVarPow(v, n)}}\\)`;

          steps.push(`\\(\\quad\\dfrac{${v}^{${m}}}{${v}^{${n}}}\\)`);
          steps.push(`\\(= ${v}^{${m}-${n}}\\)`);
          steps.push(`\\(= ${formatVarPow(v, diff)}\\)`);
        } else {
          const a = getRandomInt(1, 9);
          const b = getRandomInt(1, 9);
          const [num, den] = simplifyFraction(a, b);
          const diff = m - n;

          qTex = `\\(\\dfrac{${a}${formatVarPow(v, m)}}{${b}${formatVarPow(
            v,
            n
          )}}\\)`;

          steps.push(`\\(\\quad\\dfrac{${a}${v}^{${m}}}{${b}${v}^{${n}}}\\)`);
          steps.push(`\\(= \\dfrac{${a}}{${b}} ${v}^{${m}-${n}}\\)`);
          steps.push(
            `\\(= \\dfrac{${a}}{${b}}\\cdot ${formatVarPow(v, diff)}\\)`
          );

          // ✅ Final answer formatting
          let finalStr = "";
          if (diff === 0) {
            // Case: exponents cancel out → no variable part
            if (num === 1 && den === 1) {
              finalStr = "1";
            } else if (den === 1) {
              finalStr = `${num}`;
            } else {
              finalStr = `\\dfrac{${num}}{${den}}`;
            }
          } else {
            // Normal case: variable part exists
            if (num === 1 && den === 1) {
              finalStr = `${formatVarPow(v, diff)}`;
            } else if (den === 1) {
              finalStr =
                num === 1
                  ? `${formatVarPow(v, diff)}`
                  : `${num}${formatVarPow(v, diff)}`;
            } else {
              finalStr = `\\dfrac{${num}}{${den}}${formatVarPow(v, diff)}`;
            }
          }

          steps.push(`\\(= ${finalStr}\\)`);
        }

        document.getElementById("question").innerHTML = qTex;
        document.getElementById("steps").innerHTML = steps
          .map((s) => `<div>${s}</div>`)
          .join("");

        const sol = document.getElementById("solution");
        sol.style.display = "none";
        document.getElementById("toggleBtn").textContent = "Show Solution";

        MathJax.typesetPromise();
      }

      function toggleSolution() {
        const sol = document.getElementById("solution");
        const btn = document.getElementById("toggleBtn");
        sol.style.display =
          sol.style.display === "none" || sol.style.display === ""
            ? "block"
            : "none";
        btn.textContent =
          sol.style.display === "block" ? "Hide Solution" : "Show Solution";
        MathJax.typesetPromise();
      }

      // Initial
      generateQuestion();
    </script>
  </body>
</html>
